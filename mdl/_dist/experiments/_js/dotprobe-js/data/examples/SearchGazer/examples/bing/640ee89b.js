var IPv6Tests;(function(n){function u(t){var u,r,f,i,e;try{if(o(),u=sj_cook.get(n.ipv6testcookie,n.ipv6testcrumb),u!=null&&u=="1")return;if(r=_d.getElementsByTagName("head")[0],!r)return;if(f="ipV6TestScript"+t,i=sj_ce("script",f),i.type="text/javascript",i.async=!0,i.onerror=function(){Log.Log("ipv6test","IPv6Test IPv"+t,"IPv6TestError",!1,"Error","JSONP call resulted in error.")},e=_ge(f),e&&r)return;r.insertBefore(i,r.firstChild);i.setAttribute("src",_w.location.protocol+"//"+t+".bing.com/ipv6test/test");sj_cook.set(n.ipv6testcookie,n.ipv6testcrumb,"1",!1)}catch(s){Log.Log("ipv6test","IPv"+t,"IPv6TestError",!1,"Error","Failed to make JSONP call. Exception - "+s.message)}}function f(n){n||Log.Log("ipv6test","IPv6TestResponseError","IPv6TestError",!1,"Error","Got null response from endpoint.")}function e(){_d.body.addEventListener&&(_d.body.addEventListener("DOMNodeInserted",i),_d.body.addEventListener("DOMNodeRemoved",i))}function o(){_d.body.removeEventListener&&(_d.body.removeEventListener("DOMNodeInserted",i),_d.body.removeEventListener("DOMNodeRemoved",i))}function i(){try{t!=null&&(clearInterval(t),t=null);t=setTimeout(function(){var t=r=="6"?"4":"2";n.PingServer(t)},1e3)}catch(i){Log.Log("ipv6test","IPv6TestPingError","IPv6TestError",!1,"Error","Exception initiating ping-"+i.message)}}function s(t){t!=null&&(t=="4"||t=="6"||t=="2")&&(r=t);try{sj_evt.bind("onP1",n.observeDOMChanges,!0)}catch(i){Log.Log("ipv6test","IPv6TestBindError","IPv6TestError",!1,"Error","Exception binding onP1 - "+i.message)}}n.ipv6testcookie="ipv6";n.ipv6testcrumb="hit";var t,r="4";n.PingServer=u;n.TestIPv6Response=f;n.observeDOMChanges=e;n.Init=s})(IPv6Tests||(IPv6Tests={}))