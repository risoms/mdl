var SerpKeyboardNavigation;(function(){function a(){c=_d.activeElement;n=null;r=null;e=!1;t=-1;rt();u=_ge("b_results");u&&u.querySelectorAll&&(r=v(u.querySelectorAll(s)))}function k(){w();n=null}function d(n){var u,i;n&&(n.keyCode==9&&h&&(f("TOP"),h=!1),u=_d.activeElement,r&&u&&u.className!=="b_searchbox"&&(n.keyCode==13?f(t==-1?"EN":"EE",t):g(n)&&(i=nt(n.keyCode),i!==-1&&i!==t&&(ut(i),sj_pd(n)))))}function f(n,t){sj_log("CI.SerpKeyboardNav",n,t?t.toString():"")}function g(t){return n||c==_d.activeElement?t.altKey||t.ctrlKey?!1:!0:!1}function nt(n){return n===9?tt():n===40||n===38?document.activeElement&&document.activeElement.tagName.toLowerCase()==="select"?-1:it(n===40):-1}function tt(){var i=-1;return n?(w(),e=!0,t=-1,f("TO")):(i=0,f("TI")),i}function v(n){for(var i=[],t=0;t<n.length;t++)i.push(n[t]);return i}function it(i){var o=-1,c,l,h;return n&&(e?(e=!1,c=r.indexOf(_d.activeElement),c!==-1?o=y(i,c):(l=v(u.querySelectorAll(s+", :focus")),h=l.indexOf(_d.activeElement),h!==-1&&(o=p(i?h:h-1)))):o=y(i,t),f(i?"AD":"AU",o)),o}function y(n,t){return p(n?t+1:t-1)}function p(n){return Math.max(Math.min(n,r.length-1),0)}function rt(){i=sj_ce("div","kn_p");o=sj_ce("span",b);o.innerHTML="â–º";i.appendChild(o);o.title="Use the up and down arrow keys to focus results"}function ut(u){t=u;n=r[t];n&&n.parentNode&&(n.parentNode.insertBefore(i,n.parentNode.firstChild),ft(i),n.setAttribute("aria-live","true"),n.focus())}function w(){i&&i.parentNode&&i.parentNode.removeChild(i)}function ft(n){var t=n.getBoundingClientRect();t.bottom>window.innerHeight&&n.scrollIntoView()}var n,r,t=-1,e=!1,s="h2 a, h3 a, h4 a",b="kn_a",i,o,u,h=!0,c,l;(function(n){n[n.Up=38]="Up";n[n.Down=40]="Down";n[n.Tab=9]="Tab";n[n.Enter=13]="Enter"})(l||(l={}));sj_be(_d,"keydown",d);sj_be(_d.body,"mousedown",k,!0);sj_evt.bind("ajax.load",a,1,1);a()})(SerpKeyboardNavigation||(SerpKeyboardNavigation={}))