<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Example setup for Eyelink 1000 Plus, using PsychoPy 3.0 &#8212; mdl-R33 2019-04-23 documentation</title>
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/semeon/css/user.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script type="text/javascript" src="../../../_static/copybutton.js"></script>
    <script type="text/javascript" src="../../../_static/semeon/js/clipboard.js"></script>
    <script type="text/javascript" src="../../../_static/semeon/js/user.js"></script>
    <script type="text/javascript" src="../../../_static/semeon/js/copybutton.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../../../_static/imhr.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Region of Interest" href="../../roi/roi_.html" />
    <link rel="prev" title="Process" href="../../R33/process_.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="description" content="Results from our feasibility study for in-browser eyetracking.">
<meta name="author" content="Semeon Risom">
<meta name="email" content="semeon.risom@gmail.com">
<meta name="robots" content="index,follow">
<meta name="AdsBot-Google" content="noindex">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../index.html">
          mdl-R33</a>
        <span class="navbar-text navbar-version pull-left"><b>2019-04-23</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../../genindex.html">Glossary</a></li>
                <li><a href="../../../install.html">Install</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Install</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../install.html#dependencies">Dependencies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../features.html">Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../features.html#accesesing-raw-data">Accesesing Raw Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../features.html#preprocessing">Preprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../features.html#data-analysis">Data Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../features.html#relational-plots">Relational plots</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../R33/demographics_.html">Demographics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../R33/demographics_.html#get-metadata">get metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../R33/demographics_.html#prepare-data">prepare data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../R33/demographics_.html#demographic-statistics">demographic statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../R33/demographics_.html#list-of-variables">list of variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../R33/demographics_.html#descriptive-device">descriptive device</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../R33/demographics_.html#descriptive-task">descriptive task</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../R33/demographics_.html#summary-data">summary data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../R33/download_.html">Download data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../R33/download_.html#imports">imports</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../R33/download_.html#raw-data-(UTWeb)">raw data (UTWeb)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../R33/download_.html#REDCap">REDCap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../R33/download_.html#box">box</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../R33/process_.html">Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../R33/process_.html#imports">imports</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../R33/process_.html#start">start</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../roi/roi_.html">Region of Interest</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../roi/roi_.html#imports">imports</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../roi/roi_.html#Read-ROI-from-photoshop-PSD-files">Read ROI from photoshop PSD files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../roi/roi_.html#REDCap">REDCap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../roi/roi_.html#box">box</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../data/index.html">Current Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../live.html">Live</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/modules.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../api/mdl.html">mdl</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/mdl.download.html">mdl.download</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/mdl.plot.html">mdl.plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/mdl.roi.html">mdl.roi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/mdl.settings.html">mdl.settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/mdl.R33.html">mdl.R33</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/mdl.R33.classify.html">mdl.R33.classify</a><ul class="simple">
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/mdl.R33.config.html">mdl.R33.config</a><ul class="simple">
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/mdl.R33.metadata.html">mdl.R33.metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/mdl.R33.model.html">mdl.R33.model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/mdl.R33.nslr_hmm.html">mdl.R33.nslr_hmm</a><ul class="simple">
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/mdl.R33.processing.html">mdl.R33.processing</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/mdl.eyelink.html">mdl.eyelink</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/mdl.eyelink.calibration.html">mdl.eyelink.calibration</a><ul class="simple">
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/mdl.eyelink.eyetracking.html">mdl.eyelink.eyetracking</a><ul class="simple">
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../data/index.html">Current Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../live.html">Live</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/modules.html">API Reference</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
	<div class="imhr-bars">
		<div class="bar"></div>
		<div class="bar"></div>
		<div class="bar"></div>
		<div class="bar"></div>
	</div>
	<div class="row">
		<div class="toc col-md-3">
		<div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../data/index.html">Current Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../live.html">Live</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/modules.html">API Reference</a></li>
</ul>

		</div>
		</div>
		<div class="col-md-9 content">
			<div class="pull-right">
				
				<br/>
				
<div id="sourcelink">
  <a href="../../../_sources/examples/eyetracking/demo/demo.ipynb.txt"
     rel="nofollow">Source</a>
</div>
				
			</div>
			
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 7ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<h5><p>Example setup for Eyelink 1000 Plus, using PsychoPy 3.0.</p>
</h5><div class="info"><p><p>Created on Wed Feb 13 15:37:43 2019</p>
</p><p><p>&#64;author: Semeon Risom</p>
</p><p><p>&#64;email: <a class="reference external" href="mailto:semeon&#46;risom&#37;&#52;&#48;gmail&#46;com">semeon<span>&#46;</span>risom<span>&#64;</span>gmail<span>&#46;</span>com</a></p>
</p></div><p>Sample code to run SR Research Eyelink eyetracking system. Code is optimized for the Eyelink 1000 Plus (5.0), but should be compatiable with earlier systems.</p>
<ul class="list-container"><li><div class="title"><p>The sequence of operations for implementing the trial is:</p>
</div><ol class="list"><li><p><a class="reference external" href="demo.html#import">Import packages</a>.</p>
</li><li><p><a class="reference external" href="demo.html#init">Initialize the mdl.eyetracking package</a>.</p>
</li><li><p><a class="reference external" href="demo.html#connect">Connect to the Eyelink Host</a>.</p>
</li><li><p><a class="reference external" href="demo.html#eye">Set the dominamt eye</a>.</p>
</li><li><p><a class="reference external" href="demo.html#calibration">Start calibration</a>.</p>
</li><li><p><a class="reference external" href="demo.html#start">Start recording</a>.</p>
</li><li><p><a class="reference external" href="demo.html#stop">Stop recording</a>.</p>
</li><li><p><a class="reference external" href="demo.html#finish">Finish recording</a>.</p>
</li></ol></li><li><div class="title"><p>Optional commands include:</p>
</div><ol><li><p><a class="reference external" href="demo.html#drift">Drift correction</a>.</p>
</li><li><p><a class="reference external" href="demo.html#gc">Initiate gaze contigent event</a>.</p>
</li><li><p><a class="reference external" href="demo.html#sample">Collect real-time gaze coordinates from Eyelink</a>.</p>
</li><li><p><a class="reference external" href="demo.html#message">Send messages to Eyelink</a>.</p>
</li></ol></li></ul><h5 id="import"><p>Import packages.</p>
</h5><div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">time</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;../../../../../../..&#39;</span><span class="p">))</span>
<span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">visual</span><span class="p">,</span> <span class="n">core</span>
<span class="kn">import</span> <span class="nn">mdl</span>
</pre></div>
</div>
</div>
<h5><p>Set task parameters, either directly from PsychoPy or created manually.</p>
</h5><div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="n">expInfo</span> <span class="o">=</span> <span class="p">{</span><span class="sa">u</span><span class="s1">&#39;condition&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;even&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;participant&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;001&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;dominant eye&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;corrective&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;False&#39;</span><span class="p">}</span>
<span class="n">subject</span> <span class="o">=</span> <span class="n">expInfo</span><span class="p">[</span><span class="s1">&#39;participant&#39;</span><span class="p">]</span>
<span class="n">dominant_eye</span> <span class="o">=</span> <span class="n">expInfo</span><span class="p">[</span><span class="s1">&#39;dominant eye&#39;</span><span class="p">]</span>
<span class="c1"># `psychopy.core.Clock.CountdownTimer` instance</span>
<span class="n">routineTimer</span> <span class="o">=</span> <span class="n">core</span><span class="o">.</span><span class="n">CountdownTimer</span><span class="p">()</span>
<span class="c1"># `psychopy.visual.window.Window` instance</span>
<span class="n">window</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">Window</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">[</span><span class="mi">1920</span><span class="p">,</span> <span class="mi">1080</span><span class="p">],</span> <span class="n">fullscr</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">allowGUI</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;pix&#39;</span><span class="p">,</span> <span class="n">winType</span><span class="o">=</span><span class="s1">&#39;pyglet&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="mi">110</span><span class="p">,</span><span class="mi">110</span><span class="p">,</span><span class="mi">110</span><span class="p">],</span> <span class="n">colorSpace</span><span class="o">=</span><span class="s1">&#39;rgb255&#39;</span><span class="p">)</span>
<span class="n">window</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>
</pre></div>
</div>
</div>
<h5 id="init"><p>Initialize the <a class="reference external" href="../../../eyetracking.html#mdl.eyetracking.run">mdl.eyetracking</a> package.</p>
</h5><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Before initializing, make sure code is placed after PsychoPy window instance has been created in the experiment file. This window will be used in the calibration function.</p>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Initialize mdl.eyetracking()</span>
<span class="n">eyetracking</span> <span class="o">=</span> <span class="n">mdl</span><span class="o">.</span><span class="n">eyetracking</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span> <span class="n">libraries</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">timer</span><span class="o">=</span><span class="n">routineTimer</span><span class="p">,</span> <span class="n">demo</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<h5 id="connect"><p>Connect to the Eyelink Host.</p>
  </h5>

This controls the parameters to be used when running the eyetracker.<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="n">param</span> <span class="o">=</span> <span class="n">eyetracking</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">calibration_type</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
</pre></div>
</div>
</div>
<h5 id="eye"><p>Set the dominamt eye.</p>
  </h5>

This step is required for recieving gaze coordinates from Eyelink->PsychoPy.<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="n">eye_used</span> <span class="o">=</span> <span class="n">eyetracking</span><span class="o">.</span><span class="n">set_eye_used</span><span class="p">(</span><span class="n">eye</span><span class="o">=</span><span class="n">dominant_eye</span><span class="p">)</span>
</pre></div>
</div>
</div>
<h5 id="calibration"><p>Start calibration.</p>
  </h5>

When calibration has been completed, it returns ``True``.<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># start calibration</span>
<span class="n">calibration</span> <span class="o">=</span> <span class="n">eyetracking</span><span class="o">.</span><span class="n">calibration</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Enter the key &quot;o&quot; on the calibration instance. This will begin the task.</span>
<span class="c1"># The Calibration, Validation, &#39;task-start&#39; events are controlled by the keyboard.</span>
<span class="c1"># Calibration (&quot;c&quot;), Validation (&quot;v&quot;), task-start (&quot;o&quot;) respectively.</span>
</pre></div>
</div>
</div>
<h5 id="print"><p>(Optional) Print message to console/terminal.</p>
  </h5>

Allows printing color coded messages to console/terminal/cmd. This may be useful for debugging issues.<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="n">eyetracking</span><span class="o">.</span><span class="n">console</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;eyetracking.calibration() started&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<h5 id="drift"><p>(Optional) Drift correction.</p>
  </h5>

This can be done at any point after calibration, including before and after `eyetracking.start_recording() <../../../eyetracking.rst#mdl.eyetracking.run.start_recording>`__ has started. When drift correction has been completed, it returns ``True``.<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="n">drift</span> <span class="o">=</span> <span class="n">eyetracking</span><span class="o">.</span><span class="n">drift_correction</span><span class="p">()</span>
</pre></div>
</div>
</div>
<h5 id="start"><p>Start recording.</p>
  </h5>

.. note:: This should be run at the start of the trial. Also, there is an intentional delay of 150 msec to allow the Eyelink to buffer gaze samples that will show up in your data.<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Create stimulus (demonstration purposes only).</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;8380.bmp&quot;</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/stimuli/&quot;</span> <span class="o">+</span> <span class="n">filename</span>
<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="mi">768</span><span class="p">)</span> <span class="c1">#image size</span>
<span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">window</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">window</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#positioning image at center of screen</span>
<span class="n">stimulus</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">ImageStim</span><span class="p">(</span><span class="n">win</span><span class="o">=</span><span class="n">window</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;stimulus&quot;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;pix&#39;</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span>
                            <span class="n">flipHoriz</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">flipVert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">texRes</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">interpolate</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">depth</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">)</span>
<span class="n">stimulus</span><span class="o">.</span><span class="n">setAutoDraw</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="n">window</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>
<span class="n">window</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># start recording</span>
<span class="n">eyetracking</span><span class="o">.</span><span class="n">start_recording</span><span class="p">(</span><span class="n">trial</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">block</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<h5 id="gc"><p>(Optional) Initiate gaze contigent event.</p>
  </h5>

This is used for realtime data collection from Eyelink->PsychoPy.<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># In the example, a participant is required to look at the bounding cross for a duration</span>
<span class="c1"># of 2000 msec before continuing the task. If this doesn&#39;t happen and a maxinum duration of</span>
<span class="c1"># 10000 msec has occured, drift correction will be initiated.</span>
<span class="n">bound</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">448</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">156</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mi">1472</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mi">924</span><span class="p">)</span>
<span class="n">eyetracking</span><span class="o">.</span><span class="n">gc</span><span class="p">(</span><span class="n">bound</span><span class="o">=</span><span class="n">bound</span><span class="p">,</span> <span class="n">t_min</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">t_max</span><span class="o">=</span><span class="mi">20000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<h5 id="sample"><p>(Optional) Collect real-time gaze coordinates from Eyelink.</p>
  </h5>

.. note:: Samples need to be collected at an interval of 1000/(sampling rate) msec to prevent oversampling.<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="n">gxy</span><span class="p">,</span> <span class="n">ps</span><span class="p">,</span> <span class="n">sample</span> <span class="o">=</span> <span class="n">eyetracking</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span> <span class="c1"># get gaze coordinates, pupil size, and sample</span>
</pre></div>
</div>
</div>
<h5><p>Example use of <a class="reference external" href="../../../eyetracking.html#mdl.eyetracking.run.sample">eyetracking.sample()</a>.</p>
</h5><div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># In our example, the sampling rate of our device (Eyelink 1000 Plus) is 500Hz.</span>
<span class="n">s1</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># set current time to 0</span>
<span class="n">lgxy</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># create list of gaze coordinates (demonstration purposes only)</span>
<span class="n">s0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">clock</span><span class="p">()</span> <span class="c1"># initial timestamp</span>
<span class="c1"># repeat</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1"># if difference between starting and current time is greater than &gt; 2.01 msec, collect new sample</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="p">(</span><span class="n">s1</span> <span class="o">-</span> <span class="n">s0</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">diff</span> <span class="o">&gt;=</span> <span class="o">.</span><span class="mo">00201</span><span class="p">:</span>
        <span class="n">gxy</span><span class="p">,</span> <span class="n">ps</span><span class="p">,</span> <span class="n">sample</span> <span class="o">=</span> <span class="n">eyetracking</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span> <span class="c1"># get gaze coordinates, pupil size, and sample</span>
        <span class="n">lgxy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gxy</span><span class="p">)</span> <span class="c1"># store in list (not required; demonstration purposes only)</span>
        <span class="n">s0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">clock</span><span class="p">()</span> <span class="c1"># update starting time</span>
    <span class="c1">#else set current time</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">clock</span><span class="p">()</span>

    <span class="c1">#break `while` statement if list of gaze coordiantes &gt;= 20 (not required; demonstration purposes only)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lgxy</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">200</span><span class="p">:</span> <span class="k">break</span>
</pre></div>
</div>
</div>
<h5 id="message"><p>(Optional) Send messages to Eyelink.</p>
  </h5>

This allows post-hoc processing of event markers (i.e. “stimulus onset”).<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Sending message &quot;stimulus onset&quot;.</span>
<span class="n">eyetracking</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&quot;stimulus onset&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<h5 id="stop"><p>Stop recording.</p>
  </h5>

Also (optional) provides trial-level variables to Eyelink.<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Variables sent are optional. If they being included, they must be in <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">dict</span></code> format.</p>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Prepare variables to be sent to Eyelink</span>
<span class="n">variables</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">stimulus</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">trial_type</span><span class="o">=</span><span class="s1">&#39;encoding&#39;</span><span class="p">,</span> <span class="n">race</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="c1"># Stop recording</span>
<span class="n">eyetracking</span><span class="o">.</span><span class="n">stop_recording</span><span class="p">(</span><span class="n">trial</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">block</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">variables</span><span class="o">=</span><span class="n">variables</span><span class="p">)</span>
</pre></div>
</div>
</div>
<h5 id="finish"><p>Finish recording.</p>
</h5><div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="n">eyetracking</span><span class="o">.</span><span class="n">finish_recording</span><span class="p">()</span>
</pre></div>
</div>
</div>
<h5><p>Close PsychoPy.</p>
</h5><div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-python notranslate"><div class="highlight"><pre>
<span></span><span class="n">window</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>


		</div>
		  
	</div>
</div>
<footer class="footer">
	<div class="container">
		<div>
			&copy; Copyright 2019, Semeon Risom.<br/>
			Updated 2019-04-23.<br/>
			Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.<br/>
		</div>
	</div>
</footer>
  </body>
</html>